<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>LT2 3D Image Builder</title>
<style>
body { margin:0; background:#111; color:white; font-family:sans-serif; text-align:center; }
canvas { display:block; margin:auto; }
.controls { padding:10px; }
button, input { padding:8px; margin:5px; }
</style>
</head>
<body>

<h2>LT2 3D Image Builder</h2>

<div class="controls">
<input type="file" id="imageUpload"><br>
Width: <input type="number" id="width" value="40">
Height: <input type="number" id="height" value="40">
Depth: <input type="number" id="depth" value="4"><br>
<button onclick="generate()">Generate</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script>

let scene = new THREE.Scene();
let camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
let renderer = new THREE.WebGLRenderer({ antialias:true });
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

camera.position.z = 100;

let light = new THREE.PointLight(0xffffff, 1);
light.position.set(50,50,50);
scene.add(light);

let cubes = [];

function generate() {

    cubes.forEach(c => scene.remove(c));
    cubes = [];

    let file = document.getElementById("imageUpload").files[0];
    if (!file) return alert("Upload an image first");

    let width = parseInt(document.getElementById("width").value);
    let height = parseInt(document.getElementById("height").value);
    let depth = parseInt(document.getElementById("depth").value);

    let img = new Image();
    img.src = URL.createObjectURL(file);

    img.onload = function() {

        let canvas = document.createElement("canvas");
        canvas.width = width;
        canvas.height = height;
        let ctx = canvas.getContext("2d");
        ctx.drawImage(img, 0, 0, width, height);

        let data = ctx.getImageData(0,0,width,height).data;

        for (let y = 0; y < height; y++) {
            for (let x = 0; x < width; x++) {

                let i = (y * width + x) * 4;
                let r = data[i];
                let g = data[i+1];
                let b = data[i+2];

                let geometry = new THREE.BoxGeometry(1,1,depth);
                let material = new THREE.MeshPhongMaterial({
                    color: new THREE.Color(r/255, g/255, b/255)
                });

                let cube = new THREE.Mesh(geometry, material);
                cube.position.x = x - width/2;
                cube.position.y = -y + height/2;

                scene.add(cube);
                cubes.push(cube);
            }
        }
    }
}

function animate() {
    requestAnimationFrame(animate);
    scene.rotation.y += 0.005;
    renderer.render(scene, camera);
}
animate();

</script>
</body>
</html>
